<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>재현</title>
<style>
input {
	display: block;
	margin: 10px 0;
	padding: 10px;
	width: 300px;
}

button {
	padding: 10px 20px;
	margin-top: 10px;
}
</style>
</head>
<body>
	<h3>Hi</h3>
	<input type="text" id="id" name="id" placeholder="아이디를 입력하세요" required />
	<input type="password" id="ps" name="ps" placeholder="패스워드를 입력하세요"
		required />
	<input type="email" id="mail" name="mail" placeholder="이메일을 입력하세요"
		required />
	<input type="text" id="name" name="name" placeholder="이름을 입력하세요"
		required />
	<button type="submit" onclick="SignUp()">회원가입하기</button>

	<script src="js/jquery-3.5.1.min.js"></script>
	<script src="js/core.js"></script>
	<script>
		function SignUp() {
			var id = $("#id").val().trim();
			if (id == "") {
				alert("아이디를 입력해 주세요.");
				$("#id").focus();
				return;
			}

			var ps = $("#ps").val().trim();
			if (ps == "") {
				alert("비밀번호를 입력해 주세요.");
				$("#ps").focus();
				return;
			}

			var mail = $("#mail").val().trim();
			if (mail == "") {
				alert("이메일을 입력해 주세요.");
				$("#mail").focus();
				return;
			}

			var name = $("#name").val().trim();
			if (name == "") {
				alert("이름을 입력해 주세요.");
				$("#name").focus();
				return;
			}

			var params = {
				id : id,
				password : ps,
				mail : mail,
				name : name
			};
			var url = "NewFile.jsp";

			AJAX.call(url, params, function(data) {
				var code = data.trim();
				console.log(code);
				if (code == "OK") {
					alert("회원가입 완료.");
					window.location.href = "main.html";
				} else if (code == "ID_EXIST") {
					alert("이미 사용 중인 아이디입니다.");
					$("#id").focus();
				} else if (code == "EMAIL_EXIST") {
					alert("이미 사용 중인 이메일입니다.");
					$("#mail").focus();
				} else if (code == "ER") {
					alert("회원가입 처리 중 에러가 발생하였습니다.");
				}
			});
		}
	</script>
</body>
</html>
